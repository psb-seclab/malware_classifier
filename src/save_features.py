import os
os.chdir('C:/TEMP/malware_classifier/src')
from parsers import ExeAsmSample
from parsers import ExeHexSample
x=0
samplePath = 'C:/TEMP/malware_classifier/src/testing'
os.chdir('C:/TEMP/malware_classifier/src/testing')
while x < len(os.listdir(samplePath)):
    filename = os.listdir(samplePath)[x]
    filenamel = filename.split('.')
    if(filenamel[1] == 'bytes'):
        sample = ExeHexSample(filename)
        savePath = 'C:/TEMP/malware_classifier/src/testingfeatures'
        fullPath = os.path.join(savePath, filenamel[0]+"hex.txt")
        file = open(fullPath, "w")
        output = ''.join(str(e) for e in sample.metadata_features())
        file.write(output)
        file.close()
    #elif(filenamel[1] == 'asm'):
    #    sample = ExeAsmSample(filename)
    x+=1
    
"""
sample = ExeAsmSample(filename)

with open('api_features.txt', 'w') as file:
    file.write(sample.metadata_features())
"""